export VAULT_ADDR='http://127.0.0.1:8200'

vault secrets disable /gen

export SHA256=$(shasum -a 256 "/home/rails/blockchain/vault/ethereum-plugin/Vault" | cut -d' ' -f1)

vault write sys/plugins/catalog/secrets-gen     sha_256="${SHA256}"     command="Vault"

vault secrets enable     -path="gen"     -plugin-name="secrets-gen"     plugin

vault write gen/keypair entropy=256 passphrase="" uid=9

vault read gen/signature uid=9

-----------------------------------------------------------------------------------------

POSTGRES --
  sudo -u postgres psql

  create database vault;
  \c vault;

  CREATE TABLE vault_kv_store (
    parent_path TEXT COLLATE "C" NOT NULL,
    path        TEXT COLLATE "C",
    key         TEXT COLLATE "C",
    value       BYTEA,
    CONSTRAINT pkey PRIMARY KEY (path, key)
  );

  CREATE INDEX parent_path_idx ON vault_kv_store (parent_path);

  \conninfo

--------------------------------------------------
NON-DEV MODE --

sudo vault server -config=config/config1.hcl
sudo vault server -config=config/config2.hcl

export VAULT_ADDR='http://127.0.0.1:8200'

vault operator init

vault operator unseal 4h2S9rIdETKQ/OOM4yGcKlWgaEMSP4a/qT/71ZroqfKI
vault operator unseal yohfH7S1ktFc6WzSH8BA7Qi+jtWHHCXpr0cvy6SfdwVN
vault operator unseal LBofL0058d8sqAk/J/O8axjdqaYqc/GdgOsOWZIeizyH

vault login 85de6efd-d036-9f0d-1c64-5e18e63adee9

vault secrets disable /api
export SHA256=$(shasum -a 256 "/home/rails/GO/src/gitlab.com/arout/Vault/Vault" | cut -d' ' -f1)

vault write sys/plugins/catalog/secrets-api \
    sha_256="${SHA256}" \
    command="Vault"

vault secrets enable \
    -path="api" \
    -plugin-name="secrets-api" \
    plugin

vault write api/register username=manjeet

vault write api/signature uuid="f828a31a-58dd-46cf-a531-ac667cbb9d52" path="m/44'/60'/0'/0/0" payload="{\"nonce\":0,\"value\":100000000000000000,\"gasLimit\":21000,\"gasPrice\":5,\"to\":\"0x95273d64876408E0eDa01a45775Efc2Df6d1CfaC\",\"data\":\"\",\"chainId\":3}" coinType=60 isDev=true


vault write api/signature uuid="0ff1be47-3bcc-4243-b313-8f7f5e191b98" path="m/44'/60'/0'/0/0" payload="{\"nonce\":0,\"value\":1000000000,\"gasLimit\":21000,\"gasPrice\":30000000000,\"to\":\"0x4592d8f8d7b001e72cb26a73e4fa1806a51ac79d\",\"data\":\"\",\"chainId\":1}" coinType=60

vault write api/signature uuid="fe8ae344-1506-4df9-8e51-5e2a9af3c555" path="m/44'/0'/0'/0/0" payload="{\"inputs\":[{\"txhash\":\"b31695ff693b196d41600266d82bdf1092a4a55be608f41e1bde985408b16774\",\"vout\":0}],\"outputs\":[{\"address\":\"3BGgKxAsqoFyouTgUJGW3TAJdvYrk43Jr5\",\"amount\":91234}]}" coinType=0

vault write api/signature uuid="0ff1be47-3bcc-4243-b313-8f7f5e191b98" path="m/44'/0'/0'/0/0" payload="{\"inputs\":[{\"txhash\":\"b31695ff693b196d41600266d82bdf1092a4a55be608f41e1bde985408b16774\",\"vout\":0}],\"outputs\":[{\"address\":\"3BGgKxAsqoFyouTgUJGW3TAJdvYrk43Jr5\",\"amount\":91234}]}" coinType=0 isDev=false

vault write api/signature uuid="2ac000e0-3933-4469-bcd8-0eabe46c10e5" path="m/44'/0'/0'/0/0" payload="{\"inputs\":[{\"txhash\":\"b31695ff693b196d41600266d82bdf1092a4a55be608f41e1bde985408b16774\",\"vout\":0}],\"outputs\":[{\"address\":\"3BGgKxAsqoFyouTgUJGW3TAJdvYrk43Jr5\",\"amount\":91234}]}" coinType=0 isDev=false

vault write api/signature uuid="0ff1be47-3bcc-4243-b313-8f7f5e191b98" path="m/44'/1'/0'/0/0" payload="{\"inputs\":[{\"txhash\":\"b31695ff693b196d41600266d82bdf1092a4a55be608f41e1bde985408b16774\",\"vout\":0}],\"outputs\":[{\"address\":\"3BGgKxAsqoFyouTgUJGW3TAJdvYrk43Jr5\",\"amount\":91234}]}" coinType=1 isDev=false

vault write api/signature uuid="f70b12fd-e4de-4bcd-a433-8dccd5b14381" path="m/44'/0'/0'/0/0" payload="{\"inputs\":[{\"txhash\":\"b31695ff693b196d41600266d82bdf1092a4a55be608f41e1bde985408b16774\",\"vout\":0}],\"outputs\":[{\"address\":\"3BGgKxAsqoFyouTgUJGW3TAJdvYrk43Jr5\",\"amount\":91234}]}" coinType=0

vault write api/signature uuid="0ff1be47-3bcc-4243-b313-8f7f5e191b98" path="m/44'/0'/0'/0/0" payload="{\"inputs\":[{\"txhash\":\"b31695ff693b196d41600266d82bdf1092a4a55be608f41e1bde985408b16774\",\"vout\":0}],\"outputs\":[{\"address\":\"3BGgKxAsqoFyouTgUJGW3TAJdvYrk43Jr5\",\"amount\":91234}]}" coinType=1 isDev=true


vault write api/signature uuid="d614118d-d674-4e91-9c10-f4f917cadbac" path="m/44'/60'/0'/0/0" payload="{\"nonce\":0,\"value\":1000000000,\"gasLimit\":21000,\"gasPrice\":30000000000,\"to\":\"0x4592d8f8d7b001e72cb26a73e4fa1806a51ac79d\",\"data\":\"\",\"chainId\":1}" coinType=60

vault write api/signature uuid="1b402632-20f0-4fb9-b1b9-12f7af05a89c" path="m/44'/0'/0'/0/0" payload="{\"inputs\":[{\"txhash\":\"81b4c832d70cb56ff957589752eb412a4cab78a25a8fc52d6a09e5bd4404d48a\",\"vout\":0},{\"txhash\":\"9dd5264b09bd4aebc1d74b776e6669ba3f0e381ef2992c9434e4d0bee3068edb\",\"vout\":0}],\"outputs\":[{\"address\":\"1KKKK6N21XKo48zWKuQKXdvSsCf95ibHFa\",\"amount\":91234},{\"address\":\"1HPvK7CAYeHzCdBMBkuXeEsXdvX64yMkoE\",\"amount\":91234}]}" coinType=0

vault write api/signature uuid="fe8ae344-1506-4df9-8e51-5e2a9af3c555" path="m/44'/0'/0'/0/0" payload="{\"inputs\":[{\"txhash\":\"52c7279e852aab0f9c5150fb3db1a9f26029f41d41beb464a0d2adc72384c9a7\",\"vout\":0}],\"outputs\":[{\"address\":\"mk2covL3mw2UauEmZPKLuSBcrezeJGCJWS\",\"amount\":9000000}]}" coinType=0



vault write api/signature uuid="99147a64-a5d8-4067-9777-6b3734b40541" path="m/44'/60'/0'/0/0" payload="{\"nonce\":0,\"value\":1000000000,\"gasLimit\":21000,\"gasPrice\":30000000000,\"to\":\"0x4592d8f8d7b001e72cb26a73e4fa1806a51ac79d\",\"data\":\"\",\"chainId\":1}" coinType=60
vault write api/signature uuid="39dfb433-ef54-4a4e-8637-82de4470c2a9" path="m/44'/60'/0'/0/0" payload="{\"gasLimit\":21000,\"gasPrice\":30000000000,\"to\":\"0x4592d8f8d7b001e72cb26a73e4fa1806a51ac79d\",\"data\":\"\",\"chainId\":1}" coinType=60

-----------------------------
POLICIES --
  vault policy write admin config/admin.hcl

  vault policy write application config/application.hcl

  vault token create -policy="admin"

  vault token create -policy="application"

  vault token capabilities e912aa6c-3223-48c0-552e-4a0cb1a225a6  api/

------------------------------------------------------------------

DEV-PLUGIN --
vault server -dev -dev-plugin-dir="/etc/vault/plugins"

export VAULT_ADDR='http://127.0.0.1:8200'

vault status

vault secrets disable /api
export SHA256=$(shasum -a 256 "/home/rails/GO/src/gitlab.com/arout/Vault/Vault" | cut -d' ' -f1)

vault write sys/plugins/catalog/secrets-api \
    sha_256="${SHA256}" \
    command="Vault"

vault secrets enable \
    -path="api" \
    -plugin-name="secrets-api" \
    plugin

vault write api/password length=36 symbols=0
vault write api/echo msg=abc
vault write api/keypair entropy=256 passphrase="" uuid=9
vault read api/signature uuid=9


vault write api/register uuid=manjeet
vault read api/signature uuid=manjeet path="m/44'/60'/0'/0/0"

--------------------------------------------------------------------------------------------

vault operator unseal YDpE4GutQynmhW+T1bBP0K155/1Zu0M5ATmgsHjtqFgi
vault operator unseal l1LZ4renY3j9VqE4ojdoo0XUqyE2geXgcc5cdd4J5Z4O
vault operator unseal m/CWdPTnjdR02m04si4fTmmdHJWFFAcBZa4m/vWhZVx3
vault operator unseal yM0dwwDbeUL0iaqtKlmdrB1Gh2n02/epTRu1rh6hDscj
vault operator unseal /ZVUR+hujS0CuPddGzuRXJg8rDFFZG5N8q4dgHZv5bC9

vault login 556c29b8-6dd5-aeea-64f7-c4e8052d8ec0

------------------------------------------------------------------------------

CURL REQUESTS

curl \
    -H "X-Vault-Token: ec32c0ea-7dce-fd51-6452-f3f73a7ccc03" \
    -X GET \
    http://127.0.0.1:8200/v1/api/read

curl \
    -H "X-Vault-Token: 556c29b8-6dd5-aeea-64f7-c4e8052d8ec0" \
    -X GET \
    https://0ae1b214.ngrok.io/v1/api/read


curl \
    -H "X-Vault-Token: ec32c0ea-7dce-fd51-6452-f3f73a7ccc03" \
    -H "Content-Type: application/json" \
    -X POST \
    -d '{"uuid":"manjeet"}' \
    http://127.0.0.1:8200/v1/api/register


curl \
    -H "X-Vault-Token: ec32c0ea-7dce-fd51-6452-f3f73a7ccc03" \
    -H "Content-Type: application/json" \
    -X PUT \
    -d '{"uuid":"manjeet"}' \
    -d '{"path": "m/44'/60'/0'/0/0"}' \
    http://127.0.0.1:8200/v1/api/signature



vault write auth/cert/certs/application \
    display_name=application \
    policies=application \
    certificate=@web-cert.pem \
    ttl=3600


..............................................................

vault secrets disable /api
export SHA256=$(shasum -a 256 "/home/rails/blockchain/vault/ethereum-plugin/Vault" | cut -d' ' -f1)
vault write sys/plugins/catalog/secrets-api     sha_256="${SHA256}"     command="Vault"
vault secrets enable     -path="api"     -plugin-name="secrets-api"     plugin


https://mholt.github.io/json-to-go/